// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.27.0
// source: query.sql

package sql

import (
	"context"

	"github.com/google/uuid"
)

const createChatRoom = `-- name: CreateChatRoom :exec
/*
Chat Room
*/

INSERT INTO chat_room(
chat_room_id,
chat_room_name 
) values (
	$1, $2
)
returning chat_room_id, chat_room_name
`

type CreateChatRoomParams struct {
	ChatRoomID   uuid.UUID
	ChatRoomName int32
}

func (q *Queries) CreateChatRoom(ctx context.Context, arg CreateChatRoomParams) error {
	_, err := q.db.ExecContext(ctx, createChatRoom, arg.ChatRoomID, arg.ChatRoomName)
	return err
}

const createMessage = `-- name: CreateMessage :exec
/*
 Messages
*/
INSERT INTO message(
message_id,
fk_participants_id,
fk_chat_room_id,
content
) VALUES(
    $1,
    $2,
    $3,
    $4
) RETURNING message_id, content, created_at, fk_chat_room_id, fk_participants_id
`

type CreateMessageParams struct {
	MessageID        uuid.UUID
	FkParticipantsID uuid.UUID
	FkChatRoomID     uuid.UUID
	Content          string
}

func (q *Queries) CreateMessage(ctx context.Context, arg CreateMessageParams) error {
	_, err := q.db.ExecContext(ctx, createMessage,
		arg.MessageID,
		arg.FkParticipantsID,
		arg.FkChatRoomID,
		arg.Content,
	)
	return err
}

const createParticipants = `-- name: CreateParticipants :exec
/*
    Participants
*/
INSERT INTO participants(
participants_id,
name,
chat_room_id
) VALUES (
$1,
$2,
$3
) RETURNING participants_id, name, chat_room_id
`

type CreateParticipantsParams struct {
	ParticipantsID uuid.UUID
	Name           string
	ChatRoomID     uuid.UUID
}

func (q *Queries) CreateParticipants(ctx context.Context, arg CreateParticipantsParams) error {
	_, err := q.db.ExecContext(ctx, createParticipants, arg.ParticipantsID, arg.Name, arg.ChatRoomID)
	return err
}

const deleteChatRoom = `-- name: DeleteChatRoom :one
DELETE FROM chat_room
WHERE chat_room_id = $1
AND NOT EXISTS (
    SELECT 1 FROM message WHERE message.fk_chat_room_id = chat_room.chat_room_id
)
RETURNING chat_room_id, chat_room_name
`

func (q *Queries) DeleteChatRoom(ctx context.Context, chatRoomID uuid.UUID) (ChatRoom, error) {
	row := q.db.QueryRowContext(ctx, deleteChatRoom, chatRoomID)
	var i ChatRoom
	err := row.Scan(&i.ChatRoomID, &i.ChatRoomName)
	return i, err
}
